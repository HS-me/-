

디스크 관련 개념 중 Unmap이란?
Unmap은 SSD(Solid State Drive)와 같은 저장 장치에서 사용되는 용어 중 하나입니다. Unmap은 휴지통에서 파일을 삭제하는 것과 유사한 작업을 수행합니다. 즉, 사용하지 않는 블록을 해제하고 해당 블록에 저장된 데이터를 삭제하는 작업입니다.

SSD는 NAND 플래시 메모리를 사용하여 데이터를 저장합니다. 이 메모리는 섹터 단위로 분할되며, 이러한 섹터들을 블록이라는 단위로 묶어 관리합니다. SSD에 저장된 데이터는 블록에 저장되며, 파일을 삭제하거나 이동하면 해당 블록에 저장된 데이터는 삭제되지 않습니다. 대신 해당 블록이 사용하지 않는 블록으로 표시되어, 새로운 데이터가 저장될 때까지 대기 상태에 놓이게 됩니다.

이 때, Unmap 작업을 수행하면 사용하지 않는 블록을 실제로 해제하여 NAND 플래시 메모리의 공간을 확보할 수 있습니다. 이를 통해 저장 공간을 최적화하고 성능을 향상시킬 수 있습니다. 또한, Unmap 작업을 수행하면 블록 내에 저장된 데이터가 삭제되므로, 보안상의 이유로 사용자의 데이터가 완전히 삭제될 수 있습니다.

Unmap은 TRIM이라는 명령어를 통해 수행됩니다. TRIM 명령어는 운영 체제에서 사용되며, 파일 시스템에서 사용하지 않는 공간을 식별하고, 해당 공간에 대해 SSD에 Unmap 명령을 보내서 해당 블록을 삭제하도록 요청합니다. 이를 통해 SSD의 성능을 향상시키고, 저장 공간을 최적화할 수 있습니다.

-> 대기와 해제의 차이?

대기 상태란, 해당 블록에 저장된 데이터가 삭제되었으나, 해당 블록이 아직 사용 가능한 상태가 아니라는 것을 의미합니다. 대기 상태의 블록은 사용 가능한 상태가 아니므로, 새로운 데이터를 저장할 수 없습니다. 대기 상태의 블록이 사용 가능한 상태가 되려면, 해당 블록에 새로운 데이터를 저장하거나, Unmap 작업을 수행하여 해당 블록을 삭제해야 합니다.

반면에, 해제된다는 것은 해당 블록이 사용 가능한 상태가 된다는 것을 의미합니다. 블록이 해제된다는 것은 해당 블록에 저장된 데이터가 삭제되고, 해당 블록이 새로운 데이터를 저장할 수 있는 상태가 되었다는 것을 의미합니다. 따라서, 해제된 블록은 새로운 데이터를 저장할 수 있습니다.

요약하자면, 대기 상태란 해당 블록이 사용 가능한 상태가 아니며, 블록이 사용 가능한 상태가 되려면 Unmap 작업을 수행하거나 새로운 데이터를 저장해야 합니다. 반면에, 해제된 블록은 새로운 데이터를 저장할 수 있는 상태이며, 이전에 해당 블록에 저장된 데이터는 삭제되었습니다.

