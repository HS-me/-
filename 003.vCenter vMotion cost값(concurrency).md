[vCenter cost값 부여]

vCenter에서 vMotion에 cost값을 부여할 수 있다.

ex) vMotion 코스트를 100으로 설정하고, VM 1대 마이그레이션 수행에 4코스트가 든다고 가정한다면 한꺼번에 25대를 마이그레이션 할 수 있는것


# 기본개념

1. 데이터스토어, vCenter, 호스트, NIC에는 동시에 수행할 수 있는 task의 양에 제한이 걸려있다.

- Datastore unit limit
A datastore, by default, has a capacity of 128 units.
A vMotion operation costs 1 unit, so you can do 128 at a time on a given datastore.
A Storage vMotion operation costs 16 units, so you can do 8 at a time on a given datastore. Just a reminder: If you use vSAN for a cluster and have only 1 datastore, then your concurrency will be impacted by this limit.

- NIC unit limit
A 10Gb NIC has a capacity of 8 units, so you can do 8 vMotion operations at a time from a given 10Gb NIC.
A 25Gb NIC has as capacity of 8 units, so you can do 8 vMotion operations at a time from a given 25Gb NIC.

호스트와 vCenter의 limit은 아래 참고자료 확인

2. vMotion 등의 기본 설정 unit값을 내려서 더 많은 동시작업이 이루어지도록 시도한 결과, default 값이 가장 빠르고 좋다.


# 참고자료

1. https://blogs.vmware.com/performance/2021/02/vcenter-limits-for-tasks-running-at-the-same-time.html

2. https://blogs.vmware.com/performance/2021/02/vcenter-limits-for-concurrent-vmotion.html
