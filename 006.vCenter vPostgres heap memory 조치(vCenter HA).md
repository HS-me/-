[vCenter vPostgres 작업]

VMware vCenter Server Appliance (vCSA)에서 사용되는 PostgreSQL 데이터베이스 서비스. vCSA 내에서 PostgreSQL 데이터베이스를 실행하고 관리하는 역할을 담당. 이 서비스는 vCenter Server와 관련된 데이터를 저장하고, 가상화 환경의 구성, 가상 머신 및 호스트 관리, 리소스 할당 등을 위한 데이터베이스 역할을 수행.

현재 청주 어떤 센터의 vCenter VM의 모니터 상태를 보면 메모리를 너무 높게 사용하고 있음. 근데 이건 진짜 vCenter VM이 메모리 쓸 일이 많아서 그러는게 아니라 vCenter의 vPostgres서비스가 메모리를 너무 많이 쓰고있는 것이 원인. 이러면 매니저한테 알림이 감. 알림이 안뜨게 하길 원했고 힙메모리를 늘려주기로 함.

vPostgres 힙메모리를 늘리려면 vpostgres 서비스를 잠깐 중단해야함. 근데 근데 vCenter HA가 걸려있는 상황. 서비스를 중단하면 witness가 이상하다 느끼고 vCenter HA기능을 작동시킬 확률이 있음. 그래서 vCenter HA를 꺼주고, vpostgres heap memory 늘려준 후 vCenter HA 다시 켜줘야함.
vCenter HA를 끄기 전에 vCenter VM이 어느 호스트에 있었는지 체크해야함. 그건 vCenter HA 걸려있는 상태를 사전에 화면캡쳐 해놓고 작업이 끝나면 원래대로 복구하면 됨

참고사항: vCenter HA로인해 vm이 넘어가면 설정정보가 리셋된다.

heap memory 늘려줄 때 vCenter VM의 스냅샷을 찍을텐데, 스냅샷을 찍을 때 현재 메모리 상태까지 스냅샷으로 남기는 옵션은 체크 해제해준다. 체크해제하지 않을 경우 consolidate할 때 재밌는 상황이 발생한다고 함.
메모리 부여 작업이 끝나면 vCenter HA 걸기 전 해당 스냅샷을 삭제하고 HA를 걸어준다. 

vpostgres 포트로 사용되는 5482 포트를 열어줘야함 - ITOM이라는 것이 해당 포트를 이용해서 정보를 가져감.
7.0u1c에서 해결되었다고 하는 문제이지만 계속 발생하고있음.