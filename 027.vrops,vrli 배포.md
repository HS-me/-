
![[Pasted image 20230719140308.png]]

배포관련

dns domain은 hynix.com
dns searchpath hynix.com 동일하게

hostname은 e1-yhs-vrli1


[Log Insight: Master versus Leader versus Workers - SFlanders](https://sflanders.net/2018/03/08/log-insight-master-versus-leader-versus-workers/)
각 노드에 대한 설명


[Deploy vRealize Log Insight : Intelligent Log Management Appliance (vmwarearena.com)](https://www.vmwarearena.com/deploy-vrealize-log-insight-intelligent-log-management/)
마스터노드
https://www.vmwarearena.com/hot-to-configure-vmware-vrealize-log-insight-step-by-step/
마스터노드 배포완료하고나서

[Creating vRealize Log Insight Clusters – Victor Virtualization (wordpress.com)](https://wuchikin.wordpress.com/2022/06/14/creating-vrealize-log-insight-clusters/)
클러스터링

[How to Add Worker nodes to VMware vRealize Log Insight Cluster (vmwarearena.com)](https://www.vmwarearena.com/how-to-add-worker-nodes-to-vmware-vrealize-log-insight-cluster/)
워커노드

vrli 배포시 admin email 그냥 넘어가도됨.


vrops 배포

1. [How to Deploy vROPS 7 Step by Step | Mastering VMware](https://masteringvmware.com/part-1-how-to-deploy-vrealize-operations-manager-7-step-by-step/)

2. https://masteringvmware.com/part-2-how-to-deploy-vrealize-operations-manager-7-step-by-step/

3. [How to Add New Node in vROPS Cluster | Mastering VMware](https://masteringvmware.com/how-to-add-new-node-in-vrops-cluster/)

마스터 레플리카는 최종적으로 새 노드 추가 종료 누른 후 HA 켜면 데이터노드가 Master replica로 변경


![[Pasted image 20240514103924.png]]

계속 in progress 나와서
Finish adding new node 했을때 클러스터 전부 재부팅하고나서야 떴음

![[Pasted image 20240520132717.png]]

![[Pasted image 20240520132858.png]]

![[Pasted image 20240520132923.png]]
마스터에선 실패







VM name: Choikyu-vRops1 2 3 4
DNS: e1-ckh-vrops1 2 3 4
10.50.253.226 227 228 229

10.50.253.226 마스터
10.50.253.227 마스터레플리카
10.50.253.228 데이터
10.50.253.229 데이터
10.50.253.230 위트니스


재배포 후 위트니스는 내 센터에 올려서 진행했는데, 리소스부족인지 핑이 안나가는 증상 발생
그 외에 4개 노드는 오류안뜨고 정상진행

![[Pasted image 20240520161319.png]]
[Part 3: VMWare vROPS 6.7 Additional Data Node Installation Steps – Siva Sankar Blogs](https://sivasankar.org/2018/1804/part-3-vmware-vrops-6-7-additional-data-node-installation-steps/)
노드 추가할때 변화과정 나온 페이지



Node 배치 관련 docs
[General VMware Aria Operations Cluster Node Requirements](https://docs.vmware.com/en/VMware-Aria-Operations/8.16/Getting-Started-Operations/GUID-35DC1E13-8CCC-42FE-90A8-73A417DEE625.html)
-> 데이터노드는 물리적인 위치가 같은곳에, witness는 물리적인 위치로 다른곳에 위치하도록 함
-> 왜냐하면 CA가 거창한게 아니라 그냥 stretch cluster개념
Fault domain 1과 2를 (Docs기준으로는) 다른 클러스터로 나눠주면 됨.


Std alone / HA / C-HA 차이
[About vRealize Operations Continuous Availability (vmware.com)](https://docs.vmware.com/en/vRealize-Operations/8.10/com.vmware.vcom.vapp.doc/GUID-FB1E9F9D-BFA8-4257-8D0A-A709995F997B.html#GUID-FB1E9F9D-BFA8-4257-8D0A-A709995F997B)
[vROps Cluster Architecture: Stand-Alone, HA, and CA (brockpeterson.com)](https://www.brockpeterson.com/post/vrops-cluster-architecture-ha-and-ca)

CA구성

- Witness node 필수
- Primary + Data = Fault domain 1
- Data + Primary Replica = Fault domain 2

-> 총 세개의 Fault domin이 됨. 
![[Pasted image 20240520145712.png]]

![[Pasted image 20240520161924.png]]

위 상태에서 클러스터 offline으로 바꾸고 witness 추가

![[Pasted image 20240520165008.png]]

finish adding new node 진행
오류없음

![[Pasted image 20240520165118.png]]

Expanding

![[Pasted image 20240520165200.png]]



CA 구성 전 Fault Domain 나누라고함
UI상에서 배분해주면 됨


CA 구성 완료 시
![[Pasted image 20240529143522.png]]