

VMware vSphere 선호도 규칙(Affinity Rules)은 클러스터 내 호스트에서 VM 배치 제어를 가능하게 합니다.


규칙 유형에 따라 아래와 같은 기능이 있습니다.

- VMs를 분리 운영(Separate Virtual Machines)
- VMs를 동일 Host에서 운영(Keep Virtual Machines Together)
- 지정된 VM 그룹을 지정된 Host 그룹에서 실행(Must/Should run hosts in group)
- 지정된 VM 그룹을 지정된 Host 그룹에서 실행 하지 않음(Must/Should not run hosts in group)
- VM 그룹을 지정하여 다시 시작 순서를 구성할 수 있음
    
- Should 옵션은 지정된 Host 그룹 외 마이그레이션이 가능합니다.

그러나 DRS 동작 또는 reboot 시, 다시 지정된 Host 그룹으로 배치 됩니다.VMs를 함께 보관하거나 분리하는 방법은 VM 그룹을 생성하지 않아도 구성이 가능합니다.


[VMware vSphere 선호도 규칙(Affinity Rules)과 사용법. (notion.site)](https://vtaeho.notion.site/VMware-vSphere-Affinity-Rules-af1cbf6284ce4cec99fe080ecd9abf28)

기본 틀은 클러스터->구성->VM/HOST 그룹
VM그룹과 호스트 그룹을 설정해주고, 위 룰에 맞게 배치


Q. Must vs Must not 승자는?
룰이 conflict하다면, 먼저 설정된 룰이 이긴다.
[Configuration of vSphere 7 DRS affinity and anti-affinity rules – 4sysops](https://4sysops.com/archives/configuration-of-vsphere-7-drs-affinity-and-anti-affinity-rules/)